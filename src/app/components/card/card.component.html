<section class="cards" *ngIf="card && feedback">
  <mat-card class="content-title" *ngIf="card.title && card.metadata">
    <mat-card-title>
      {{card.title}}
    </mat-card-title>
    <mat-card-subtitle>
      {{card.metadata.type}}
    </mat-card-subtitle>
  </mat-card>
  <section>
    <img class="card-image"
      [src]="'assets/print-cards/' + languageCode + '/' + card.card_value.toLowerCase() + card.card_suit.charAt(0).toLowerCase() + '.png'" />
    <div class="references"
      *ngIf="card.card_suit === 'diamond' || card.card_suit === 'club' || card.card_suit ==='heart'">
      <button mat-raised-button color="primary" (click)="showHint()">{{
        showHintContent ?"Hide Hint to Main Statement Answer": "Show Hint to Main Statement Answer"}}</button>
    </div>

    <div class="main_version_statements" *ngIf="showMainContent">

      <div *ngIf="card.card_suit === 'diamond' || card.card_suit === 'club'">
        <!--Puzzles and Counting-->


        <div *ngIf="showHintContent">
          <mat-card class="main_version" *ngIf="card.main_version">

            <span class="main_hint" *ngIf="card.main_version.hint">
              <mat-card-subtitle> Hint:</mat-card-subtitle>
              <p [innerHTML]="card.main_version.hint"></p>

              <button mat-raised-button color="accent" (click)="showAnswer()">{{showAnswerContent?"Hide Answer": "Show
                Answer"}}</button>
            </span>
            <div *ngIf="showAnswerContent">
              <span class="main_answer" *ngIf="card.main_version.correct_answer">
                <mat-card-subtitle> Correct Answer:</mat-card-subtitle>
                <p [innerHTML]="card.main_version.correct_answer"></p>
                <button mat-raised-button color="primary" (click)="showExplanation()">{{showExplanationContent?"Hide
                  Explanation": "Show Explanation"}}</button>

              </span>
              <div class="explanation" *ngIf="showExplanationContent">
                <span class="main_explanation" *ngIf="card.main_version.explanation">
                  <mat-card-subtitle> Explanation:</mat-card-subtitle>
                  <p [innerHTML]="card.main_version.explanation"></p>
                </span>
                <span class="main_instructions" *ngIf="card.main_version.further_instructions">
                  <mat-card-subtitle> Further Instructions:</mat-card-subtitle>
                  <p [innerHTML]="card.main_version.further_instructions"></p>
                </span>
                <span class="main_tips" *ngIf="card.main_version.strategy_tips">
                  <mat-card-subtitle> Strategy Tips:</mat-card-subtitle>
                  <p [innerHTML]="card.main_version.strategy_tips"></p>
                </span>
              </div>
            </div>
          </mat-card>
        </div>
      </div>

      <div *ngIf="card.card_suit === 'heart'">
        <!--Fun Fact-->
        <button mat-raised-button color="primary" (click)="showHint()">{{showHintContent?"Hide Hint": "Show Hint to
          Funfact"}}</button>
        <div *ngIf="showHintContent">
          <mat-card class="main_version" *ngIf="card.main_version">

            <span class="main_hint" *ngIf="card.main_version.hint">
              <mat-card-subtitle> Hint:</mat-card-subtitle>
              <p [innerHTML]="card.main_version.hint"></p>

              <button mat-raised-button color="primary" (click)="showExplanation()">{{showExplanationContent?"Hide
                Answer": "Show
                Answer"}}</button><!--Changed the button text to Answer, lablled explanation in dataset-->
            </span>

            <div class="explanation" *ngIf="showExplanationContent">
              <span class="main_explanation" *ngIf="card.main_version.explanation">
                <mat-card-subtitle> Explanation:</mat-card-subtitle>
                <p [innerHTML]="card.main_version.explanation"></p>
              </span>
              <button mat-raised-button color="accent" (click)="showExtension()">{{showExtensionsContent?"Hide
                Extensions": "Show Extensions"}}</button>

            </div>
          </mat-card>
        </div>
      </div>
      <div *ngIf="card.card_suit === 'spade'">
        <!--Game-->
        <button mat-raised-button color="primary" (click)="showExplanation()">{{showHintContent?"Hide instructions":
          "Show instructions"}}</button>
        <div *ngIf="showExplanationContent">
          <mat-card class="main_version" *ngIf="card.main_version">

            <span class="main_explanation" *ngIf="card.main_version.further_instructions">
              <mat-card-subtitle> Explanation:</mat-card-subtitle>
              <p [innerHTML]="card.main_version.further_instructions"></p>

              <button mat-raised-button color="primary" (click)="showHint()">{{showHintContent?"Hide tips": "Show
                strategy tips"}}</button>
            </span>

            <div *ngIf="showHintContent">
              <span class="main_tip" *ngIf="card.main_version.strategy_tips">
                <mat-card-subtitle> Tip:</mat-card-subtitle>
                <p [innerHTML]="card.main_version.strategy_tips"></p>
              </span>

              <button mat-raised-button color="accent" (click)="showExtension()">{{showExtensionsContent?"Hide
                Extensions": "Show Extensions"}}</button>
            </div>
          </mat-card>
        </div>
      </div>
    </div>

    <div class="extensions">
      <div *ngIf="showExtension1Content">
        <mat-card class="extension_1" *ngIf="card.extension_1">
          <mat-card-title>Extension 1</mat-card-title>
          <span class="ext_1_statement" *ngIf="card.extension_1.statement">
            <mat-card-subtitle> Statement:</mat-card-subtitle>
            <p [innerHTML]="card.extension_1.statement"></p>
          </span>
          <button *ngIf="card.extension_1.hint" mat-raised-button color="primary"
            (click)="extension1Hint()">{{showExtension1Hint?"Hide Hint": "Show Hint to Answer"}}</button>

          <div *ngIf="showExtension1Hint">
            <span class="ext_1_hint" *ngIf="card.extension_1.hint">
              <mat-card-subtitle> Hint:</mat-card-subtitle>

              <p [innerHTML]="card.extension_1.hint"></p>
              <button mat-raised-button color="primary" (click)="extension1Answer()">{{showExtension1Answer?"Hide
                Answer": "Show Answer"}}</button>

            </span>

            <div *ngIf="showExtension1Answer">
              <div *ngIf="card.card_suit === 'heart'">
                <span class="ext_1_answer"></span>
                <mat-card-subtitle> Explanation:</mat-card-subtitle>
                <p [innerHTML]="card.extension_1.explanation"></p>
              </div>
              <span class="ext_1_answer" *ngIf="card.extension_1.correct_answer">
                <mat-card-subtitle> Correct Answer:</mat-card-subtitle>
                <p>{{card.extension_1.correct_answer}}</p>
                <button mat-raised-button color="primary"
                  (click)="extension1Explanation()">{{showExtension1Explanation?"Hide Extension Explanation": "Show
                  Explanation"}}</button>
              </span>
              <div *ngIf="showExtension1Explanation">
                <span class="ext_1_explanation" *ngIf="card.extension_1.explanation">
                  <mat-card-subtitle> Explanation:</mat-card-subtitle>

                  <p [innerHTML]="card.extension_1.explanation"></p>
                </span>
              </div>
            </div>
          </div>


        </mat-card>
        <button *ngIf="card.extension_2" mat-raised-button color="primary" (click)="showExtension2()">Go to Extension
          2</button>
        <button mat-raised-button color="primary" (click)="showMain()">Back to main statement</button>

      </div>
      <div *ngIf="showExtension2Content">
        <mat-card class="extension_2" *ngIf="card.extension_2">
          <mat-card-title>Extension 2</mat-card-title>
          <span class="ext_2_statement" *ngIf="card.extension_2.statement">
            <mat-card-subtitle> Statement:</mat-card-subtitle>
            <p [innerHTML]="card.extension_2.statement"></p>
          </span>
          <button *ngIf="card.extension_1.hint" mat-raised-button color="primary"
            (click)="extension2Hint()">{{showExtension2Hint?"Hide Hint": "Show Hint to Answer"}}</button>
          <div *ngIf="showExtension2Hint">
            <span class="ext_2_hint" *ngIf="card.extension_2.hint">
              <mat-card-subtitle> Hint:</mat-card-subtitle>

              <p [innerHTML]="card.extension_2.hint"></p>
              <button mat-raised-button color="primary" (click)="extension2Answer()">{{showExtension2Answer?"Hide
                Answer": "Show Answer"}}</button>

            </span>

            <div *ngIf="showExtension2Answer">
              <span class="ext_2_answer" *ngIf="card.extension_2.correct_answer">
                <mat-card-subtitle> Correct Answer:</mat-card-subtitle>
                <p>{{card.extension_2.correct_answer}}</p>
                <button mat-raised-button color="primary"
                  (click)="extension2Explanation()">{{showExtension2Explanation?"Hide Extension Explanation": "Show
                  Explanation"}}</button>
              </span>
              <div *ngIf="showExtension2Explanation">
                <span class="ext_2_explanation" *ngIf="card.extension_2.explanation">
                  <mat-card-subtitle> Explanation:</mat-card-subtitle>

                  <p [innerHTML]="card.extension_2.explanation"></p>
                </span>
              </div>
            </div>
          </div>
        </mat-card>
        <button mat-raised-button color="primary" (click)="showExtension1()">Go to Extension 1</button>
        <button mat-raised-button color="primary" (click)="showMain()">Back to main statement</button>
      </div>




      <!--
   <mat-card>
      <div class="additional_information" *ngIf="card.additional_information">
        <mat-card-title>Additonal Information</mat-card-title>
        <span *ngIf="card.additional_information.about">
          <mat-card-subtitle> About</mat-card-subtitle>

          <p [innerHTML]="card.additional_information.about"></p>  
        </span>
      </div>
    </mat-card>
   -->

    </div>

    <div class="references">
      <button mat-raised-button color="accent" (click)="showExtension()">Extensions</button>
    </div>
    <section class="references">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Additonal Information
          </mat-panel-title>
          <mat-panel-description>
            Click here to see References and other additional information
          </mat-panel-description>
        </mat-expansion-panel-header>


        <button mat-raised-button color="accent" (click)="showReferences()">
          <mat-icon>library_books</mat-icon>
          {{showReferencesContent?"Hide References": "Show References"}}
        </button>
        <div *ngIf="showReferencesContent">
          <span *ngIf="card.additional_information.references">
            <mat-card>
              <mat-card-subtitle>
                References
              </mat-card-subtitle>
              <span *ngFor="let reference of card.additional_information.references">
                <a [href]="reference"></a>
                <p [innerHTML]="reference"></p>
              </span>
            </mat-card>

          </span>
        </div>


        <button mat-raised-button color="accent" (click)="showAbout()">
          <mat-icon>info</mat-icon>
          {{showAboutContent?"Hide About Information": "Show About Information"}}
        </button>
        <div *ngIf="showAboutContent">
          <span *ngIf="card.additional_information.about">
            <mat-card>
              <mat-card-subtitle>
                About
              </mat-card-subtitle>
              <p [innerHTML]="card.additional_information.about"></p>
            </mat-card>

          </span>
        </div>
      </mat-expansion-panel>


    </section>
    <section class="feedback">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Feedback?
          </mat-panel-title>
          <mat-panel-description>
            Click here to leave us a message!
            <mat-icon>contact_support</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div>
          Share feedback
          <form (ngSubmit)="onSubmit()">
            <table>
              <tr>
                <td>
                  <div>
                    <mat-form-field appearance="outline">
                      <mat-label>Name</mat-label>
                      <input matInput placeholder="Insert your name" id="name" name="name" type="text"
                        [(ngModel)]="feedback.name">
                      <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                      <mat-hint>Name</mat-hint>
                    </mat-form-field>
                  </div>
                </td>
              </tr>

              <tr>
                <td>
                  <div>
                    <mat-form-field appearance="outline">
                      <mat-label>Country</mat-label>
                      <input matInput placeholder="Country" id="country" name="country" type="text"
                        [(ngModel)]="feedback.country">
                      <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                      <mat-hint>Country</mat-hint>
                    </mat-form-field>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div>
                    <mat-form-field appearance="outline">
                      <mat-label>Email</mat-label>
                      <input matInput placeholder="Insert your email" id="email" name="email" type="text"
                        [(ngModel)]="feedback.email">
                      <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                      <mat-hint>Email</mat-hint>
                    </mat-form-field>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div>
                    <mat-form-field appearance="outline">
                      <mat-label>Feedback</mat-label>
                      <input matInput placeholder="Enter your feedback" id="feedback" name="feedback" type="text"
                        [(ngModel)]="feedback.feedback">
                      <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                      <mat-hint>Feedback</mat-hint>
                    </mat-form-field>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div hidden="true">
                    <label for="cardtitle">
                      Card title
                    </label>
                    <input id="cardtitle" name="cardtitle" type="text">
                    {{feedback.cardtitle}}
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div hidden="true">
                    <label for="cardtitle">
                      Card Suit
                    </label>
                    <input id="suit" name="suit" type="text">
                    {{feedback.suit}}
                  </div>
                </td>
              </tr>
            </table>

            <p>
              <button type="submit" mat-raised-button>Submit</button>
            </p>
          </form>
        </div>
      </mat-expansion-panel>

    </section>

  </section>

</section>